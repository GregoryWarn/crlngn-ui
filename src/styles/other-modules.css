body.crlngn-ui{
  --crlngn-taskbar-height: 0px;

  /* DDB Gamelog */
  .ddb-game-log-fixHeader .message-sender:hover {
    text-shadow: none;
  }
  /* MONK'S COMMON DISPLAY */
  #common-display-toolbar {
    .common-button-group .header {
      font-size: var(--font-size-10);
    }

    .common-display-button {
      &.toggle{
        width: 36px;
        height: 36px;
        font-size: 24px;
        line-height: 36px;
        padding: 2px;
      }
      &.small {
        border-radius: 2px;
        border: none;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      }
    }

    ol.context-items, li.context-group > ol {
      justify-items: flex-start;
    }

    ol.context-items li.context-item {
      width: 100%;
      padding: 0 6px;
      font-size: var(--font-size-12);
      line-height: var(--font-size-24);
      text-align: left;
    }
  }

  /* MONK'S TOKEN BAR */
  .monks-tokenbar.chat-card .card-header {
    padding: 3px 0;
    border-top: 1px groove var(--input-background-color);
    border-bottom: 1px groove var(--input-background-color);
  }
  .monks-tokenbar.chat-card .card-header h3:hover {
    text-shadow: none;
  }
  .monks-tokenbar.chat-card .sheet .items-list {
    padding: 0;
  }
  .monks-tokenbar .sheet .items-list .items-header {
    border: 1px groove var(--input-background-color);
  }
  .monks-tokenbar .sheet .items-list .item {
    border-bottom: 1px groove var(--input-background-color);
  }
  .monks-tokenbar .sheet .items-list .items-header h3 {
    font-family: var(--crlngn-font-titles);
    font-size: var(--font-size-14);
  }

  .monks-tokenbar .contested-roll header .request-name {
    &:first-child{
      text-align: left;
      padding-right: 1.5em;

      &:after{
        font-size: var(--font-size-14);
      }
    }
    &:last-child{
      text-align: right;
      padding-left: 1.5em;
    }
  }
  .monks-tokenbar .card-footer button{
    min-width: 2.5rem;
  }


  .monks-tokenbar.chat-card .card-footer {
    border-top: none;
    gap: 4px;
  }
  .monks-tokenbar.chat-card .card-header h3 {
    font-size: var(--font-size-14);
  }

  &.theme-dark .monks-tokenbar .sheet .items-list .items-header {
    background: var(--crlngn-chat-button-bg-15);
  }

  /* DFREDS EFFECTS PANEL  */
  #effects-panel {
    transform: translateY(45px);
  }
  .effect-info h1 {
    font-size: var(--font-size-h1);
  }

  /* VISUAL ACTIVE EFFECTS */
  .visual-active-effects.panel {
    /*--visual-active-effects-icon-size: calc(var(--left-control-item-size) * 1.5);*/
    --visual-active-effects-top-offset: calc(var(--left-control-item-size) * 1.5);
  }

  /* RIPPER93 youtube widget */
  #sidebar-video-player {
    margin: 0 0 10px 0;
    border-radius: 0;
  }
  #sidebar-video-player .inner-resize-container {
    border-radius: 0;
    box-shadow: none;
  }

  /* RIPPER93 MODULE HUB */
  .dice-tray-container {
    align-items: center;
  }
  button.dice-tray-button{
    box-shadow: none;
    &[data-button=adv],
    &[data-button=dis]{
      font-weight: 600;
      background: var(--left-control-main-bg);
      border-radius: 2px;

      &:hover{
        box-shadow: none;
      }
    }
    i{
      font-size: var(--font-size-20);
      margin: 0;
    }
  }

  /* MIDI-QOL */
  .chat-sidebar .message .dnd5e2.evaluation .midi-qol.target > img {
    border: none !important;
    /*border-radius: 0 !important;*/
  }

  /* ROLLMODE */
  #ui-right .sidebar-tab #chat-controls .rollmode-buttons button,
  #ui-right .sidebar-tab #chat-controls .rollmode-buttons button > *{
    font-size: var(--font-size-16);
  }
  #ui-right .sidebar-tab #chat-controls .rollmode-buttons button.active,
  #chat-popout #chat-controls .rollmode-buttons button.active{
    border: 1px solid var(--color-highlights-75);
  }
  
  /* PARTY RESOURCES */
  #ui-middle.navigation-collapsed #fvtt-party-resources-status-bar {
    margin-top: 0;
  }

  #fvtt-party-resources-status-bar {
    margin-top: calc(var(--crlngn-top-offset, 0px) + var(--left-control-item-size));
    position: relative;
    width: 100%;
    z-index:0;

    &:hover {
      z-index:100;
    }
    ul li {
      font-size: var(--font-size-13);
    }
  }
  footer #fvtt-party-resources-status-bar {
    margin-top: 0;
  }
  
  
  /* POLYGLOT */
  .polyglot.polyglot-lang-select span.select2-selection,
  .select2-container .select2-dropdown,
  .select2-results__option,
  .select2-selection__rendered,
  .select2-container--default .select2-search--dropdown .select2-search__field,
  .polyglot.polyglot-lang-select .select2-container--default .select2-selection--single .select2-selection__rendered {
    border: 1px solid var(--color-dark-bg-90);
    color: var(--color-text-light-highlight);
  }
  .polyglot.polyglot-lang-select .select2-container--default .select2-selection--single .select2-selection__arrow {
    color: var(--color-text-light-highlight);
  }
  .polyglot.polyglot-lang-select span.select2-selection {
    background: var(--color-input-bg);
  }
  .select2-container .select2-dropdown {
    background: var(--color-dark-bg);
  }
  .polyglot.polyglot-user-list div {
    width: 6px;
    height: 6px;
  }

  .polyglot input:not(:checked),
  .polyglot.polyglot-lang-select input:checked {
    accent-color: var(--color-dark-bg);
    color: var(--color-text-light-highlight);
  }

  .select2-container--default .select2-results__option .select2-results__option {
    padding: 0.5em;
  }

  .select2-container--default .select2-results__option--selected {
    background: var(--color-highlights-25);
  }

  .select2-container--default .select2-results__option--highlighted.select2-results__option--selectable {
    background: var(--color-highlights-50);
  }

  .polyglot.polyglot-lang-select .select2-container--default .select2-selection--single .select2-selection__arrow b {
    border-color: var(--color-text-light-highlight) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0);
  }

  /* HEALTH ESTIMATE */
  :is(.chat-popout, #chat-log, .chat-log) .chat-message.hm_message {
    text-shadow: 0 1px 4px rgba(0, 0, 0.9);
    border-width: 0;

    &.hm_messageheal, &.hm_messageheal:before{
      background: var(--dnd5e-color-success-background) !important;
    }

    &.hm_messagetaken, &.hm_messagetaken:before{
      background: var(--dnd5e-color-failure-background) !important;
    }
    .message-content{
      font-size: var(--font-size-13);
    }
    .message-timestamp, .name-stacked .title{
      color: var(--color-light-2);
    }
  }

  /* DND5e Character Monitor*/
  
  :is(.chat-popout, #chat-log, .chat-log) .chat-message.dnd5e-cm {
    --dnd5e-cm-hpPlus: var(--dnd5e-color-success-background);
    --dnd5e-cm-hpMinus: var(--dnd5e-color-failure-background);
    --dnd5e-cm-on: var(--dnd5e-color-success-background);
    --dnd5e-cm-off: var(--dnd5e-color-failure-background);
    --dnd5e-cm-slots: #773d9a;
    --dnd5e-cm-feats: #4a57aa;
    --dnd5e-cm-effects: #9d6329;
    --dnd5e-cm-currency: #a28d3e;
    --dnd5e-cm-proficiency: #37908a;
    --dnd5e-cm-ability: #37908a;
    --dnd5e-cm-sheetMode: #000000;

    border-width: 0;
    /*text-align: center;*/

    .message-content div.dnd5e-cm {
      font-size: var(--font-size-13);
      text-shadow: 0 1px 4px rgba(0, 0, 0.9);
      padding: 0.25rem 0.5rem;
    }
    .message-timestamp, .name-stacked .title{
      color: var(--color-light-2);
    }
  }

  /* VISUAL ACTIVE EFFECTS */
  #visual-active-effects,
  #effects-panel {
    --vae-backdrop-color: var(--color-dark-bg-75);
    --vae-button-color-backdrop: var(--color-dark-bg-75);
    --vae-name-color: rgb(255, 255, 255);
    --vae-name-font: var(--crlngn-font-family);
    --visual-active-effects-icon-size: 46px;

    &.panel{
      gap: calc(var(--visual-active-effects-icon-size) / 3);
    }

    *:not(i, .effect-icon, h1, h2) {
      border: 0;
      font-family: var(--crlngn-font-family);
      font-size: var(--font-size-13);
      line-height: 1.4;
      outline: 0;

      &:after{
        border: 0;
      }
    }
    .effect-info{
      filter: none;
      border-radius: 4px;
      transform: scale(0.9);
      padding: 10px;
    }
    .effect-icon{
      /*box-shadow: none;*/
      background-color: var(--color-dark-bg-25);
      border-radius: 3px;
      filter: none;
      padding: 10px;
    }
    .effect-info-header {

      .name{
        font-family: var(--crlngn-font-titles);
        font-size: var(--font-size-16);
        font-weight: 600;
        letter-spacing: 0.03em;
        margin: 10px 0;
      }
    }
    .effect-tag {
      border: 0;
      padding: 6px 10px;
      filter: saturate(0.5);

      i{
        font-size: var(--font-size-11);
      }
    }
    a.content-link, a.inline-roll {
      color: inherit;
      background: transparent;
      font-weight: 600;
    }
  }

  /* ITEM PILES */
  .sidebar-tab{
    .item-piles-chat-card {
      padding: 0;
      p, ul, ol, li, a, b, strong, h3, h4, h5, h6 {
        font-family: var(--crlngn-font-family);
      }
    }
  }

  &.theme-dark {
    .sidebar-tab{
      .item-piles-chat-card {
        p, ul, ol, li, a, b, strong {
          background: var(--color-dark-bg-25);
        }
      }
    }
  }
    
  /* ANONYMOUS */
  .anonymous-replaced {
    padding: 0 4px;    
    border-radius: 3px;   
    opacity: 0.8; 
  }
  .sidebar-tab .chat-message .message-content span.anonymous-replaced,
  .sidebar-tab .chat-message .message-content *.anonymous-replaced {
    font-weight: 500;
    padding: 0 4px;
    border-radius: 3px;  
    opacity: 0.8; 
  }
  &.theme-dark {
    .anonymous-replaced {
      background: var(--color-dark-bg-75);
    }
    .sidebar-tab .chat-message .message-content span.anonymous-replaced,
    .sidebar-tab .chat-message .message-content *.anonymous-replaced {
      background: var(--color-dark-bg-50);
    }

  }

  /* SMALLTIME */
  #smalltime-app.pinned {
    margin: 0;
  }
  #smalltime-app .window-content {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  /* MONK'S WALL ENHANCEMENTS */
  #ui-left.auto-hide {
    #wall-ctrls {
      margin-left: 0;
    }
  }
  #ui-left{
    #wall-ctrls {
      position: absolute;
      width: 0;
      height: auto;
      margin-left: calc(var(--left-control-item-size) * -1);
      z-index: 100;

      ol.control-tools {
        li.control-tool {
          width: var(--left-control-item-size);
          height: var(--left-control-item-size);
        }
      }
    }
    ol.control-tools li[data-tool="walltype"]:hover #wall-ctrls {
      opacity: 1;
      ol {
        width: var(--left-control-item-size);
        margin-left: var(--left-control-item-size);
        opacity:1;
      }
    } 

    
  }

  /* TIDY UI */
  #module-management {
    min-height: 60vh;
    max-height: calc(100vh - 40px);
  }

  /* TIDY 5e 
  .app{
    --t5e-body-font-family: var(--font-body);
    --t5e-title-font-family: var(--dnd5e-font-modesto);
    --t5e-primary-accent-color: var(--color-warm-2);
    --color-text-hyperlink: var(--color-warm-1);
  }*/
  

  /* EPIC ROLLS */
  #epic-rolls-5e-get-roll-data .grid-container {
    overflow: auto;
  }

  #combat-dock {
    width: calc(100% - 40px);
    margin-top: 0;
    pointer-events: none;
    z-index: 0;
    &:hover{
      z-index: 1001;
    }

    > #combatants, .buttons-container {
      pointer-events: all;
    }

    .buttons-container {
      justify-content: flex-start;
      gap: 1px;
  
      i{
        border: none;
        border-radius: 0; 
      }
      
    }
  }

  /* CAROUSEL COMBAT TRACKER */
  &.crlngn-scene-nav #ui-middle {
    #combat-dock {
      margin-top: calc(var(--crlngn-top-offset, 0px) + var(--left-control-item-size, 0px));
      transition: margin-top 0.15s ease-out;
    }
  }

  &.crlngn-scene-nav.navigation-collapsed #ui-middle {
    #combat-dock {
      margin-top: 0;
    }
  }

  &.crlngn-crux{
    /* CRUX */
    &.crux-taskbar-compat .crux__container, 
    &.crux-taskbar-compat .crux__empty-tray{
      height: 100vh !important; 
    }
    &.crux-taskbar-compat #crux, #crux {
      height: calc(100vh - var(--crlngn-sidebar-bottom, 0px)) !important; 
      .crux__container {
        border-right: 1px solid rgba(0,0,0,0.75);
        background-color: rgba(0,0,0,0.8);

        h1{
          font-family: var(--crlngn-font-titles) !important;
          line-height: 1.15;
        }
      }

      .crux__top-section{
        padding: 0;
      }
      h2.crux__section-header{
        font-family: var(--crlngn-font-titles) !important;
        border: 0 !important;
        border-radius: 0 !important;
        padding-top: 2px !important;
        padding-bottom: 2px !important;

        &:after {
          content: "Width: " var(--crux-width) " | Ratio: " var(--crux-width-ratio) " | Multiplier: " var(--header-multiplier);
          display: inline-block;
        }
      }
      .crux__skill-header{
        font-family: var(--crlngn-font-titles) !important;
      }

      .crux__group-header {
        h3, h2 {
          border-bottom: 1px solid rgba(255,255,255,0.15) !important;
          font-family: var(--crlngn-font-titles) !important;
          padding-bottom: 0.25em;

        }
      }

      .crux__item {
        padding: 0 4px !important;
      }
      .crux__item .item-name h4 {
        font-family: var(--crlngn-font-family) !important;
      }
      .crux__item .item-name h3,
      .crux__group-header h3 {
        font-family: var(--crlngn-font-family) !important;
      }

      .crux__utility-button,
      .crux__action-button,
      .crux__end-turn-button {
        font-family: var(--crlngn-font-family) !important;
        padding: 4px !important;
        border: none !important;
      }

      .crux__utility-button,
      .crux__action-button,
      .crux__action-button img {
        border: none !important;
      }

      .crux__actor .group-dots .dot {
        width: 8px !important;
        height: 8px !important;
        margin-left: 2px !important;
      }

      .crux__item .flag {
        margin-left: 2px !important;
        filter: saturate(0.7) !important;
        transform: scale(0.9) !important;
      }
    }
  }

  &.crlngn-combat-carousel{
    /* CAROUSEL COMBAT TRACKER TOOLTIPS */
    #tooltip.combat-dock-tooltip {
      padding: 12px !important;
    }
    #tooltip.combat-dock-tooltip .combat-dock-tooltip-wrapper {
      font-family: var(--crlngn-font-family);
      font-size: var(--font-size-12);
    }
    #tooltip.combat-dock-tooltip .combat-dock-tooltip-wrapper h2 {
      font-family: var(--crlngn-font-titles);
    }
    #tooltip.combat-dock-tooltip .combat-dock-tooltip-wrapper i {
      font-size: var(--font-size-11);
    }
    #tooltip.combat-dock-tooltip{
      padding: 0;
      border: 0;
      background: var(--color-dark-bg-90);
      box-shadow: none;
      max-width: 280px;
      margin-top: 40px;
      transform-origin: top center;
    }
    #tooltip.combat-dock-tooltip .combat-dock-tooltip-wrapper {
      padding: 0;
      border: 0;
      box-shadow: none;
    }
    #tooltip.combat-dock-tooltip{
      .roll-link-group a, .roll-link a, .reference-link a {
        background: var(--color-dark-bg-90);
      }
    }

    #tooltip.combat-dock-tooltip .combat-dock-tooltip-wrapper > ul {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 14px;

      > li{ 
        min-width: calc((100% - 14px) / 2);
        max-width: 100%;
        flex: 1 1 calc((100% - 14px) / 2);
        background: var(--color-dark-bg-75);
        outline: 5px solid var(--color-dark-bg-75);
        padding: 0;
        margin: 0;
        line-height: 1.35;
        
        &.effects-list {
          flex-wrap: wrap;
        }

        span{
          flex: 1 1 calc(100% - 2em);
        }
        span.tooltip-duration {
          display: flex;
          line-height: 1;
          min-width: 100%;
          padding-left: 1.8em;
          margin-top: 0.5em;
        }
        
      }
    }
    
    #tooltip.combat-dock-tooltip .effect-description {
      background: transparent;
      font-size: var(--font-size-11);
      padding: 0;
      line-height: 1.35;

      ul{
        padding: 0;

        li{
          display: block;
        }
      }
    }
    #tooltip.combat-dock-tooltip a.content-link {
      display: inline-flex;
    }
  }

  &.crlngn-dice-tray {
    /* DICE TRAY */
    .dice-tray {
      button, input{
        box-shadow: 0 0 6px inset var(--color-dark-bg-90);
      }

      button:hover, input:hover,
      button:focus, input:focus {
        color: var(--color-light-1);
        border-color: var(--color-warm-3);
        box-shadow: 0 0 6px inset var(--color-warm-3);
        background: transparent;
      }
    }
  }

  &.crlngn-party-monitor-dock {
    #party-monitor-dock .party-monitor-buttons {
      gap: 0.25em;
      padding: 0.5rem 0;
    }
    #party-monitor-dock .party-monitor-buttons i {
      border: 0;
      border-radius: 0;
      width: 2rem;
      height: 2rem;
    }
    /* fix for large portraits being cut on smaller screens*/
    #party-monitor-dock #party-container {
      align-items: flex-start;
    }
  }

  &.crlngn-monks-scene-nav{
    /* Monk's Scene Navigation */
    #navigation {
      margin-top: 0;
      .monks-scene-navigation {
        max-height: 32px;
        overflow: visible;
        ol.scene-list{
          border: 0 !important;
          li.nav-item, li.folder {
            a.folder-name{
              border-color: #666 !important;
            }
            a.scene-name {
              margin: 0;
              padding: 4px;
              height: 32px;

              &.expanded {
                margin-top: 0;
                height: 32px;
              }

              i {
                font-size: var(--font-size-11);
              }
            }
          }
        }
        /*
        ol.scene-list{
          gap: 0;
          margin: 0;
          padding: 0;
  
          li.nav-item {
            margin: 0;
  
            a.scene-name{
              border-width: 0;
              border-radius: 0;
              margin: 0;
              padding: 4px;
              height: 32px;
              border: 1px solid #000 !important;
  
              &.expanded {
                margin-top: 0;
                height: 32px;
              }
  
              i {
                font-size: var(--font-size-11);
              }
            }
          }
        }*/
      }
    }
  }

  &.crlngn-hurry-up {
    #hurry-up {
      transform: scale(0.75);
    }
  }

  &.crlngn-touch-vtt #touch-vtt-controls {
    padding: 0 !important;
    button {
      line-height: 18px;
      font-size: var(--font-size-10);
      width: var(--left-control-item-size);
      height: var(--left-control-item-size);
      background: #141414d9;
      color: var(--color-light-1);
      border-radius: 0;
      border: 0;
      margin: 0;
    }
  }

  /* MIDI QOL */
  /*.midi-qol-attack-roll, .midi-qol-damage-roll {
    flex: 1 1 auto;
    min-width: calc((100% - 10px) / 2);
    width: auto;
  }*/

}