{"version":3,"file":"module.js","sources":["../../src/constants/Hooks.mjs","../../src/constants/General.mjs","../../src/constants/Settings.mjs","../../src/components/GeneralUtil.mjs","../../src/components/CameraUtil.mjs","../../src/components/SettingsUtil.mjs","../../src/components/LogUtil.mjs","../../src/components/TopNavUtil.mjs","../../src/components/ChatUtil.mjs","../../src/components/PlayersListUtil.mjs","../../src/components/Main.mjs","../../src/module.mjs"],"sourcesContent":["/**\n * Foundry Core hooks\n * https://foundryvtt.com/api/classes/client.Hooks.html\n * https://foundryvtt.com/api/modules/hookEvents.html\n * */ \nexport const HOOKS_CORE = {\n  INIT: \"init\", \n  READY: \"ready\", \n\n  /* Chat Messages */\n  RENDER_CHAT_MESSAGE: \"renderChatMessage\" ,\n\n  /* Left Side Controls */\n  GET_SCENE_CONTROLS: \"getSceneControlButtons\",\n  RENDER_SCENE_CONTROLS: \"renderSceneControls\",\n  RENDER_PLAYERS_LIST: \"renderPlayerList\",\n\n  /* Scene Navigation*/\n  RENDER_SCENE_NAV: \"renderSceneNavigation\",\n  COLLAPSE_SCENE_NAV: \"collapseSceneNavigation\",\n  EXPAND_SCENE_NAV: \"expandSceneNavigation\",\n\n  /* Right Side Panel */\n  COLLAPSE_SIDE_BAR: \"collapseSidebar\",\n\n  /* Macros */\n  RENDER_HOTBAR: \"renderHotbar\",\n\n  /* Camera Views */\n  RENDER_CAMERA_VIEWS: \"renderCameraViews\"\n}","export const MODULE_ID = \"crlngn-ui\";\nexport const MODULE_TITLE = \"Carolingian UI\";\nexport const MODULE_SHORT = \"crlngn-ui\";\nexport const DEBUG_TAG = [\n  `%cCarolingian UI`,\n  `color:rgb(54, 0, 119); font-weight: bold;`,\n  `|`,\n];\n\nexport const ROLL_TYPES = {\n  abilityCheck: \"ability\",\n  abilitySave: \"save\",\n  attack: \"attack\",\n  check: \"check\",\n  concentration: \"concentration\",\n  damage: \"damage\",\n  deathSave: \"death\",\n  formula: \"formula\",\n  healing: \"heal\",\n  custom: \"roll\",\n  skillCheck: \"skill\",\n  toolCheck: \"tool\"\n}\n\nexport const CHAR_ABILITIES = [\n  { abbrev: \"str\", name: \"strength\" },\n  { abbrev: \"dex\", name: \"dexterity\" },\n  { abbrev: \"con\", name: \"constitution\" },\n  { abbrev: \"int\", name: \"intelligence\" },\n  { abbrev: \"wis\", name: \"wisdom\" },\n  { abbrev: \"cha\", name: \"charisma\" }\n]\n\nexport const CLASS_PREFIX = 'crlngn';","export const SETTING_INPUT = {\n  select: \"select\", \n  checkbox: \"checkbox\",\n  text: \"text\",\n  number: \"number\"\n}\nexport const SETTING_SCOPE = {\n  client: \"client\",\n  world: \"world\"\n}\n\nexport const SETTINGS = { \n\n  enableChatStyles: { \n    tag: \"enable-chat-styles\", \n    label: \"Enable styles for chat messages\", \n    hint: \"Adds style modifications to chat cards. When dark mode is selected on Foundry, makes chat cards dark as well. MOSTLY FOR DND5E - only partial support for other systems.\", \n    propType: Boolean, \n    inputType: SETTING_INPUT.checkbox, \n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: true \n  }, \n\n  customFont: { \n    tag: \"custom-font\", \n    label: \"Custom fonts\", \n    hint: \"You can type the name of custom fonts loaded on Foundry core and they will be used throughout the interface. Names with spaces must be written with double quotes (\\\"Font Name\\\"). If the font doesn't load you haven't typed the name correctly, or the font was not found. Default value: \"+`\"Work Sans\", Arial, sans-serif`, \n    propType: String, \n    inputType: SETTING_INPUT.text, \n    default: `\"Work Sans\", \"Roboto\", Arial, sans-serif`, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: true \n  }, \n\n  debugMode: { \n    tag: \"debug-mode\", \n    label: \"Debug Mode\",\n    hint: \"Enable or disable debug messages on browser console\",\n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: false,\n    scope: SETTING_SCOPE.client,\n    config: true\n  },\n\n  sceneNavCollapsed: { \n    tag: \"scene-nav-collapsed\", \n    label: \"Scene Navigation Collapsed\", \n    hint: \"Current state of the scene navigation toggle. Is it collapsed?\", \n    propType: Boolean, \n    inputType: SETTING_INPUT.checkbox, \n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: false \n  },\n\n  sceneNavEnabled: { \n    tag: \"scene-nav-enabled\", \n    label: \"Enable Scene Nav Styles\", \n    hint: \"If you are having layout issues with a non-compatible module, you can disable my custom styles for Scene Navigation.\", \n    propType: Boolean, \n    inputType: SETTING_INPUT.checkbox, \n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: true \n  },\n\n  sceneNavPos: { \n    tag: \"scene-nav-pos\", \n    label: \"Scene Navigation Position\", \n    hint: \"Stores current position of navigation for reset when it's re-rendered\", \n    propType: Number, \n    inputType: SETTING_INPUT.number, \n    default: 0, \n    scope: SETTING_SCOPE.client, \n    config: false \n  },\n\n  enableMacroLayout: { \n    tag: \"enable-macro-layout\", \n    label: \"Enable macro resize\", \n    hint: \"The module reduces the size of macro slots on the hotbar, and enlarges the numbers. Disable this setting to use default Foundry layout.\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n  showSceneNavOnHover: { \n    tag: \"show-scene-nav-on-hover\", \n    label: \"Show scene list on hover\", \n    hint: \"If the scene navigation is collapsed, you can show it by hovering the mouse over the top of screen.\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n  autoHideLeftControls: { \n    tag: \"auto-hide-secondary-controls\", \n    label: \"Auto hide secondary controls\", \n    hint: \"Enable to keep the secondary bar on the left controls hidden unless you hover on the region or click on an item\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n  autoHidePlayerList: { \n    tag: \"auto-hide-player-list\", \n    label: \"Auto hide player list\", \n    hint: \"Enable to keep the bottom left players list minimized, except when hovered\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n collapseMacroBar: { \n    tag: \"collapse-macro-bar\", \n    label: \"Collapse Macro Bar\", \n    hint: \"Enable to have the macro hotbar start minimized by default on world load.\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n  enableCameraStyles: {\n    tag: \"enable-camera-styles\", \n    label: \"Enable floating camera dock\", \n    hint: \"Apply styles to camera dock, so video players are floating and can be placed anywhere on screen. You may still pop out individual videos and move them independently\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.world, \n    config: true, \n    requiresReload: true \n  },\n\n  cameraDockPosX: { \n    tag: \"camera-dock-pos-x\", \n    label: \"X position of camera dock\", \n    hint: \"Position of camera dock on X axis, from left. In absolute pixels. \", \n    propType: Number, \n    inputType: SETTING_INPUT.number, \n    default: 0, \n    scope: SETTING_SCOPE.client, \n    config: true \n  },\n\n  cameraDockPosY: { \n    tag: \"camera-dock-pos-y\", \n    label: \"Y position of camera dock\", \n    hint: \"Position of camera dock on Y axis, from bottom. In absolute pixels. \", \n    propType: Number, \n    inputType: SETTING_INPUT.number, \n    default: 100, \n    scope: SETTING_SCOPE.client, \n    config: true \n  },\n\n  cameraDockWidth: { \n    tag: \"camera-dock-width\", \n    label: \"Width of camera dock\", \n    hint: \"Width of camera dock when not minimized, in absolute pixels. \", \n    propType: Number, \n    inputType: SETTING_INPUT.number, \n    default: 120, \n    scope: SETTING_SCOPE.client, \n    config: true \n  },\n\n  cameraDockHeight: { \n    tag: \"camera-dock-height\", \n    label: \"Height of camera dock\", \n    hint: \"Height of camera dock when not minimized, in absolute pixels. \", \n    propType: Number, \n    inputType: SETTING_INPUT.number, \n    default: 120, \n    scope: SETTING_SCOPE.client, \n    config: true \n  } \n}","\nexport class GeneralUtil {\n  /**\n   * Checks if module is currently installed and active\n   * @param {string} moduleName \n   * @returns \n   */\n  static isModuleOn(moduleName){\n    const module = game.modules?.get(moduleName);\n    // LogUtil.log(\"isModuleOn\", [module?.active]);\n    return module?.active ? true : false;\n  }\n\n  static html(parent, selector) {\n    return parent.querySelector(selector);\n  }\n\n  static getFullWidth(element) {\n    const style = window.getComputedStyle(element);\n    if (style.width === '0px') {\n      return 0;\n    }\n    return element.offsetWidth;\n  }\n\n  static getOffsetBottom(element) {\n    const offsetTop = element.offsetTop;\n    const elementHeight = element.offsetHeight;\n    const offsetParent = element.offsetParent;\n    const parentHeight = offsetParent ? offsetParent.clientHeight : window.innerHeight;\n  \n    return parentHeight - (offsetTop + elementHeight);\n  }\n}\n","import { HOOKS_CORE } from \"../constants/Hooks.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { GeneralUtil } from \"./GeneralUtil.mjs\";\nimport { LogUtil } from \"./LogUtil.mjs\";\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class CameraUtil {\n  static #offsetX = 0;\n  static #offsetY = 0;\n  static isDragging = false;\n  static cameraContainer;\n  //resizing\n  static isResizing = false;\n  static #startX = 0;\n  static #startY = 0;\n  static #startWidth = 0;\n  static #startHeight = 0;\n  static #startBottom = 0;\n\n  static init(){ \n    if(SettingsUtil.get(SETTINGS.enableCameraStyles.tag)){ \n      Hooks.on(HOOKS_CORE.RENDER_CAMERA_VIEWS, CameraUtil.onRenderFloating);\n      LogUtil.log(\"CameraUtil\", [SettingsUtil.get(SETTINGS.enableCameraStyles.tag)]);\n      CameraUtil.onRenderFloating();\n    }else{ \n      Hooks.on(HOOKS_CORE.RENDER_CAMERA_VIEWS, CameraUtil.onRenderPlain);\n      CameraUtil.onRenderPlain();\n    } \n  }\n\n  static onRenderPlain(){\n    document.querySelector('#camera-views')?.classList.add('visible');\n  }\n\n  static onRenderFloating(){\n    document.querySelector('#camera-views')?.classList.add('crlngn-ui');\n    CameraUtil.cameraContainer = document.querySelector('#camera-views .camera-container');\n\n    const controlsElem = document.querySelector('#camera-views .user-controls');\n    const cameraGrid = document.querySelector('#camera-views .camera-grid');\n\n    LogUtil.log(\"CameraUtil.onRender\", [ SettingsUtil.get(SETTINGS.cameraDockPosX.tag), SettingsUtil.get(SETTINGS.cameraDockPosY.tag) ]);\n\n    if(CameraUtil.cameraContainer && cameraGrid && controlsElem){\n      CameraUtil.cameraContainer?.insertBefore(controlsElem, cameraGrid);\n      document.querySelector('#camera-views .camera-container')?.classList.add('visible');\n    }\n    CameraUtil.makeDraggable();\n    CameraUtil.makeResizeable();\n    CameraUtil.resetPositionAndSize();\n    CameraUtil.placeControlsToggle();\n  }\n\n  static placeControlsToggle(){ \n    const camControls = document.querySelector('#camera-views .user-controls');\n    const existingButtons = camControls?.querySelectorAll(\".crlngn-video-toggle\");\n    LogUtil.log(\"placeControlsToggle\", [camControls, existingButtons]);\n\n    if(existingButtons.length > 0){\n      return; \n    }\n\n    const controlBar = document.querySelector('#camera-views .user-controls .control-bar');\n    const btnToggle = document.createElement(\"button\"); \n    btnToggle.classList.add(\"crlngn-video-toggle\"); \n    btnToggle.innerHTML = '<i class=\"fa fa-play-circle\" aria-hidden=\"true\"></i>';\n\n    camControls?.insertBefore(btnToggle, controlBar);\n  }\n\n  static makeDraggable(){\n    CameraUtil.cameraContainer?.addEventListener(\"mousedown\", (e) => {\n      const body = document.querySelector(\"body.crlngn-ui\");\n      LogUtil.log(\"mousedown\", [ e.target ]);\n      if(e.target.parentNode.classList.contains('volume-bar')){\n        return;\n      }\n      body?.addEventListener(\"mousemove\", CameraUtil.#onDragMove);\n      body?.addEventListener(\"mouseup\", CameraUtil.#onDragRelease); \n\n      const offsetBottom = GeneralUtil.getOffsetBottom(CameraUtil.cameraContainer);\n      CameraUtil.isDragging = true;\n      CameraUtil.#offsetX = e.clientX - CameraUtil.cameraContainer?.offsetLeft;\n      CameraUtil.#offsetY = (window.innerHeight - e.clientY) - offsetBottom;\n      // CameraUtil.cameraContainer.style.zIndex = \"101\"; \n\n      e.stopPropagation();\n    }); \n\n  }\n\n  static makeResizeable(){\n    if(CameraUtil.cameraContainer){\n      const body = document.querySelector(\"body.crlngn-ui\");\n      const resizeHandle = document.createElement(\"div\");\n      resizeHandle.classList.add(\"resize-handle\");\n      CameraUtil.cameraContainer.append(resizeHandle);\n\n      resizeHandle.addEventListener(\"mousedown\", (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        CameraUtil.isResizing = true;\n    \n        CameraUtil.#startX = e.clientX;\n        CameraUtil.#startY = e.clientY;\n        CameraUtil.#startBottom = parseInt(getComputedStyle(CameraUtil.cameraContainer).bottom) || 0;\n        CameraUtil.#startWidth = CameraUtil.cameraContainer.offsetWidth;\n        CameraUtil.#startHeight = CameraUtil.cameraContainer.offsetHeight;\n\n    \n        body?.addEventListener(\"mousemove\", CameraUtil.#onResize);\n        body?.addEventListener(\"mouseup\", CameraUtil.#onStopResize);\n      });\n    }\n  }\n\n  static resetPositionAndSize({x, y, w, h} = { x: null, y: null, w: null, h: null }){\n    if(!CameraUtil.cameraContainer){ return }\n    if(!x && !y && !w && !h){\n      const savedPosX = SettingsUtil.get(SETTINGS.cameraDockPosX.tag) || 0;\n      const savedPosY = SettingsUtil.get(SETTINGS.cameraDockPosY.tag) || 0;\n      const savedWidth = SettingsUtil.get(SETTINGS.cameraDockWidth.tag) || 0;\n      const savedHeight = SettingsUtil.get(SETTINGS.cameraDockHeight.tag) || 0;\n      CameraUtil.cameraContainer.style.left = `${savedPosX}px`;\n      CameraUtil.cameraContainer.style.bottom = `${savedPosY}px`;\n      CameraUtil.cameraContainer.style.width = `${savedWidth}px`;\n      CameraUtil.cameraContainer.style.height = `${savedHeight}px`;\n    }\n    if(x){\n      CameraUtil.cameraContainer.style.left = `${x}px`;\n    }\n    if(y){\n      CameraUtil.cameraContainer.style.bottom = `${y}px`;\n    }\n    if(w){\n      CameraUtil.cameraContainer.style.width = `${w}px`;\n    }\n    if(h){\n      CameraUtil.cameraContainer.style.height = `${h}px`;\n    }\n  }\n\n  // when user releases element\n  static #onDragRelease(e){\n    if(CameraUtil.isDragging){\n      const body = document.querySelector(\"body.crlngn-ui\");\n      SettingsUtil.set(SETTINGS.cameraDockPosX.tag, parseInt(CameraUtil.cameraContainer?.style.left) || 0);\n      SettingsUtil.set(SETTINGS.cameraDockPosY.tag, parseInt(CameraUtil.cameraContainer?.style.bottom) || 0);\n      \n      body?.removeEventListener(\"mousemove\", CameraUtil.#onDragMove); \n      body?.removeEventListener(\"mouseup\", CameraUtil.#onDragRelease); \n  \n      CameraUtil.isDragging = false; \n      e.stopPropagation(); \n    }\n    \n  } \n\n  // when user drags element\n  static #onDragMove(e){ \n    if (!CameraUtil.isDragging) return; \n    LogUtil.log(\"mousemove\", [ e.target.parentNode ]); \n    \n    if(CameraUtil.cameraContainer){\n      let left = e.clientX - CameraUtil.#offsetX;\n      let bottom = (window.innerHeight - e.clientY) -  CameraUtil.#offsetY;\n\n      if(left + CameraUtil.cameraContainer.offsetWidth > window.innerWidth){  \n        left = window.innerWidth - CameraUtil.cameraContainer.offsetWidt;\n      }\n      CameraUtil.cameraContainer.style.left = `${left}px`;\n\n      if(bottom + CameraUtil.cameraContainer.offsetHeight > window.innerHeight){  \n        bottom = window.innerHeight - CameraUtil.cameraContainer.offsetHeight;\n      } \n      CameraUtil.cameraContainer.style.bottom = `${bottom}px`;\n    }\n    // e.stopPropagation(); \n  } \n\n  // when user drags the resize handle\n  static #onResize(e) {\n    if (!CameraUtil.isResizing) return;\n    const newWidth = CameraUtil.#startWidth + (e.clientX - CameraUtil.#startX);\n    const deltaY = e.clientY - CameraUtil.#startY; // How much the mouse moved\n    const newHeight = CameraUtil.#startHeight + deltaY;\n    const newBottom = CameraUtil.#startBottom - deltaY;\n\n    CameraUtil.cameraContainer.style.width = `${newWidth}px`;\n    CameraUtil.cameraContainer.style.height = `${newHeight}px`;\n    CameraUtil.cameraContainer.style.bottom = `${newBottom}px`;\n  }\n\n  // when user releases the resize handle\n  static #onStopResize() {\n    const body = document.querySelector(\"body.crlngn-ui\");\n    CameraUtil.isResizing = false;\n    body?.removeEventListener(\"mousemove\", CameraUtil.#onResize);\n    body?.removeEventListener(\"mouseup\", CameraUtil.#onStopResize);\n\n    LogUtil.log(\"onStopResize\", [CameraUtil.cameraContainer?.style.width, CameraUtil.cameraContainer?.style.height, CameraUtil.cameraContainer?.style.bottom])\n    SettingsUtil.set(SETTINGS.cameraDockWidth.tag, parseInt(CameraUtil.cameraContainer?.style.width || 0));\n    SettingsUtil.set(SETTINGS.cameraDockHeight.tag, parseInt(CameraUtil.cameraContainer?.style.height || 0));\n    SettingsUtil.set(SETTINGS.cameraDockPosY.tag, parseInt(CameraUtil.cameraContainer?.style.bottom) || 0);\n\n  }\n\n}","import { MODULE_ID, MODULE_SHORT } from \"../constants/General.mjs\";\nimport { HOOKS_CORE } from \"../constants/Hooks.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { CameraUtil } from \"./CameraUtil.mjs\";\nimport { LogUtil } from \"./LogUtil.mjs\";\n\nexport class SettingsUtil {\n    /**\n     * Registers settings for this module\n     */\n    static registerSettings(){\n      document.querySelector(\"body\").classList.add(MODULE_SHORT); \n      \n      /**\n       * Register each of the settings defined in the SETTINGS constant \n       */\n      const settingsList = Object.entries(SETTINGS);\n      settingsList.forEach(async(entry) => {\n        const setting = entry[1]; \n        LogUtil.log(\"Registering... \",[entry]);\n\n        const settingObj = { \n          name: setting.label,\n          hint: setting.hint,\n          default: setting.default,\n          type: setting.propType,\n          scope: setting.scope,\n          config: setting.config,\n          requiresReload: setting.requiresReload || false,\n          onChange: value => SettingsUtil.apply(setting.tag, value)\n        }\n\n        await game.settings.register(MODULE_ID, setting.tag, settingObj);\n\n        if(SettingsUtil.get(setting.tag)===undefined){\n          SettingsUtil.set(setting.tag, setting.default);\n        }\n\n        LogUtil.log(\"registerSettings\",[setting.tag, SettingsUtil.get(setting.tag)]);\n      });\n\n      Hooks.on(HOOKS_CORE.RENDER_SCENE_CONTROLS, SettingsUtil.applyLeftControlsSettings);\n      Hooks.on(HOOKS_CORE.RENDER_PLAYERS_LIST, SettingsUtil.applyPlayersListSettings); \n      Hooks.on(HOOKS_CORE.RENDER_HOTBAR, () => {\n        SettingsUtil.applyHotBarSettings();\n        SettingsUtil.applyHotBarCollapse();\n      });\n      SettingsUtil.applySceneNavSettings();\n      \n      // apply chat style settings\n      if(SettingsUtil.get(SETTINGS.enableChatStyles.tag)){ \n        document.querySelector(\"body\").classList.add(\"crlngn-chat\"); \n      }\n\n      // apply custom font settings\n      const customFont = SettingsUtil.get(SETTINGS.customFont.tag);\n      if(customFont){\n        const root = document.querySelector(\"body.crlngn-ui\");\n        root.style.setProperty('--crlngn-font-family', customFont);\n      }\n    }\n\n    /**\n     * Retrieve the value of a setting for this module\n     * @param {String} settingName \n     * @param {String} moduleName \n     * @returns {*} // current value of the setting\n     */\n    static get(settingName, moduleName=MODULE_ID){\n      if(!settingName){ return null; }\n\n      let setting = false;\n\n      if(moduleName===MODULE_ID){\n        setting = game.settings.get(moduleName, settingName);\n      }else{\n        const client = game.settings.storage.get(\"client\");\n        let selectedSetting = client[`${moduleName}.${settingName}`];\n        //\n        if(selectedSetting===undefined){\n          const world = game.settings.storage.get(\"world\");\n          selectedSetting = world.getSetting(`${moduleName}.${settingName}`);\n        }\n        setting = selectedSetting?.value;\n        LogUtil.log(\"GET Setting\", [selectedSetting, setting]);\n      }\n\n      return setting;\n    }\n    /**\n     * Retrieve the value of a setting for this module\n     * @param {String} settingName \n     * @param {String} moduleName \n     * @returns {*} // current value of the setting\n     */\n    static set(settingName, newValue, moduleName=MODULE_ID){ \n      if(!settingName){ return false; }\n\n      let selectedSetting = game.settings.storage.get(\"client\")[`${moduleName}.${settingName}`];\n\n      if(!selectedSetting){\n        const world = game.settings.storage.get(\"world\");\n        selectedSetting = world.getSetting(`${moduleName}.${settingName}`);\n      } \n      LogUtil.log(\"Setting\",[settingName, selectedSetting]);\n\n      try{\n        game.settings.set(moduleName, settingName, newValue);\n        // selectedSetting.update({value: newValue});\n      }catch(e){\n        LogUtil.log(\"Unable to change setting\",[settingName, selectedSetting]);\n      }\n\n      return true;\n    }\n\n    /**\n     * Apply current settings\n     */\n    static apply(settingTag, value=undefined){\n\n      if(value===undefined){\n        value = SettingsUtil.get(settingTag);\n      }\n      LogUtil.log(\"SettingsUtil.apply\",[settingTag, value, SettingsUtil.get(settingTag)]); \n      switch(settingTag){\n        case SETTINGS.enableMacroLayout.tag: \n          SettingsUtil.applyHotBarSettings(); break; \n        case SETTINGS.collapseMacroBar.tag:\n          SettingsUtil.applyHotBarCollapse(); break; \n        case SETTINGS.autoHideLeftControls.tag: \n          SettingsUtil.applyLeftControlsSettings(); break; \n        case SETTINGS.autoHidePlayerList.tag: \n          SettingsUtil.applyPlayersListSettings(); break; \n        case SETTINGS.cameraDockPosX.tag: \n          SettingsUtil.applyCameraPosX(value); break; \n        case SETTINGS.cameraDockPosY.tag: \n          SettingsUtil.applyCameraPosY(value); break; \n        case SETTINGS.cameraDockWidth.tag:\n          SettingsUtil.applyCameraWidth(value); break;\n        case SETTINGS.cameraDockHeight.tag:\n          SettingsUtil.applyCameraHeight(value); break;\n        default:\n          // do nothing\n      }\n      \n    }\n\n\n    static applySettings(){\n      // const settingsList = Object.entries(SETTINGS);\n      // settingsList.forEach((entry) => {\n      //   const setting = entry[1]; \n      //   let currSetting = SettingsUtil.get(setting.tag);\n      //   SettingsUtil.apply(setting.tag, currSetting);\n      // });\n    }\n\n    static applyHotBarSettings(){\n      const macroSizeOption = SettingsUtil.get(SETTINGS.enableMacroLayout.tag);\n      const hotbar = document.querySelector(\"#hotbar\");\n\n      if(!macroSizeOption && hotbar){\n        hotbar.classList.add(\"foundry-default\");\n      }else if(hotbar){\n        hotbar.classList.remove(\"foundry-default\");\n      }\n    }\n    static applyHotBarCollapse(){\n      const macroCollapseOption = SettingsUtil.get(SETTINGS.collapseMacroBar.tag);\n\n      if(macroCollapseOption){\n        ui.hotbar.collapse();\n      }\n    }\n\n    static applyLeftControlsSettings(){\n      const controlsAutoHide = SettingsUtil.get(SETTINGS.autoHideLeftControls.tag);\n      const controls = document.querySelector(\"#ui-left\");\n\n      if(controlsAutoHide){\n        controls.classList.add(\"auto-hide\");\n      }else{\n        controls.classList.remove(\"auto-hide\");\n      }\n    }\n\n    static applyPlayersListSettings(){\n      LogUtil.log(\"applyPlayersListSettings\",[document.querySelector(\"#players\"), SettingsUtil.get(SETTINGS.autoHidePlayerList.tag)]); \n      if(SettingsUtil.get(SETTINGS.autoHidePlayerList.tag)){\n        document.querySelector(\"#players\")?.classList.add(\"auto-hide\");\n      }else{\n        document.querySelector(\"#players\")?.classList.remove(\"auto-hide\");\n      }\n    }\n\n    static applySceneNavSettings(){\n      SettingsUtil.set(SETTINGS.sceneNavPos.tag, 0);\n    }\n\n    static applyCameraPosX(pos){\n      const xPos = pos || SettingsUtil.get(SETTINGS.cameraDockPosX.tag); \n      CameraUtil.resetPositionAndSize({ x: xPos });\n    }\n    static applyCameraPosY(pos){\n      const yPos = pos || SettingsUtil.get(SETTINGS.cameraDockPosY.tag); \n      CameraUtil.resetPositionAndSize({ y: yPos });\n    }\n\n    static applyCameraWidth(value){\n      const width = value || SettingsUtil.get(SETTINGS.cameraDockWidth.tag);\n      CameraUtil.resetPositionAndSize({ w: width });\n    }\n    static applyCameraHeight(value){\n      const height = value || SettingsUtil.get(SETTINGS.cameraDockHeight.tag); \n      CameraUtil.resetPositionAndSize({ h: height });\n    }\n}\n\n","import { DEBUG_TAG } from \"../constants/General.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class LogUtil {\n    /**\n     * Outputs information on console, adding module name and reference\n     * @param {string} ref - Reference information to log after module name\n     * @param {any[]} data - data to log on console\n     */\n    static log(ref=\"\", data=[], bypassSettings=false){\n      try{\n        const debugSetting = SettingsUtil.get(SETTINGS.debugMode.tag);\n        const isDebugModeOn = bypassSettings || debugSetting;\n        if(!isDebugModeOn){ return };\n\n        console.log(...DEBUG_TAG, ref, ...data);\n      }catch(e){\n        console.log(...DEBUG_TAG, ref, ...data);\n      }\n    }\n\n    /**\n     * Outputs information on console, adding module name and reference\n     * @param {string} ref - Reference information to log after module name\n     * @param {any[]} data - data to log on console\n     */\n    static warn(ref=\"\", data=[]){\n      console.warn(...DEBUG_TAG, ref, ...data);\n    }\n\n    /**\n     * Logs an error on the console and/or ui notification\n     * @param {string} strRef - Reference string for the error. \n     * @param {object} options - \n     */\n    static logError(strRef, options){ // = { ui:false, console:true, permanent:false }) {\n        if(options.ui){\n            // console.log(ui.notifications);\n            ui.notifications?.error(strRef, { localize: true, permanent: options.permanent });\n        }\n        if(options.console) console.error(...DEBUG_TAG, strRef);\n    }\n}\n\n","import { HOOKS_CORE } from \"../constants/Hooks.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { GeneralUtil } from \"./GeneralUtil.mjs\";\nimport { LogUtil } from \"./LogUtil.mjs\";\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class TopNavigation {\n  static #navElem;\n  static #scenesList;\n  static #navTimeout;\n  static #navExtras;\n  static #navToggle;\n\n  static init(){\n    // if user disabled Scene Navigation Styles,\n    // skip everything\n    const uiMiddle = document.querySelector(\"#ui-middle\");\n    if(SettingsUtil.get(SETTINGS.sceneNavEnabled.tag) && uiMiddle){\n      uiMiddle.classList.add(\"crlngn-ui\");\n    }else if(uiMiddle){\n      uiMiddle.classList.remove(\"crlngn-ui\");\n      return;\n    }\n\n    TopNavigation.addListeners(); \n\n    LogUtil.log(HOOKS_CORE.RENDER_SCENE_NAV, [ui.nav, SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag)]); \n    TopNavigation.setNavPosition(0);\n    \n    TopNavigation.placeNavButtons(); \n    if(SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag)){ \n      ui.nav.collapse();\n    }else{\n      ui.nav.expand();\n    }\n\n    Hooks.on(HOOKS_CORE.RENDER_SCENE_NAV, () => { \n      TopNavigation.addListeners(); \n\n      LogUtil.log(HOOKS_CORE.RENDER_SCENE_NAV, [ui.nav, SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag)]); \n      TopNavigation.setNavPosition();\n      \n      TopNavigation.placeNavButtons(); \n      if(SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag)){ \n        ui.nav.collapse();\n      }else{\n        ui.nav.expand();\n      }\n    }); \n\n    Hooks.on(HOOKS_CORE.COLLAPSE_SIDE_BAR, (value) => { \n      TopNavigation.placeNavButtons(); \n    }); \n\n    Hooks.on(HOOKS_CORE.COLLAPSE_SCENE_NAV, (nav, value) => {\n      SettingsUtil.set(SETTINGS.sceneNavCollapsed.tag, value); \n      LogUtil.log(\"NAV toggle\", [nav, value]); \n    }); \n\n    Hooks.on(HOOKS_CORE.EXPAND_SCENE_NAV, (nav, value) => {\n      SettingsUtil.set(SETTINGS.sceneNavCollapsed.tag, false); \n      LogUtil.log(\"NAV expand\", [nav, false]); \n    }); \n\n    SettingsUtil.apply(SETTINGS.sceneNavCollapsed.tag); \n    \n  } \n\n  static addListeners(){\n    this.#navElem = document.querySelector(\"#navigation\"); \n    this.#scenesList = document.querySelector(\"#scene-list\"); \n    this.#navExtras = document.querySelector(\"#navigation .nav-item.is-root\"); \n    this.#navToggle = document.querySelector(\"#nav-toggle\"); \n\n    this.#navElem?.addEventListener(\"mouseenter\", ()=>{\n      if( !SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag) ||\n          !SettingsUtil.get(SETTINGS.showSceneNavOnHover.tag) ){ \n            return;\n      }\n      clearTimeout(this.#navTimeout);\n\n      const list = document.querySelector(\"#scene-list\");\n      list.style.display = \"flex\";\n      const navigation = document.querySelector(\"#navigation\");\n      navigation.classList.remove(\"collapsed\");\n    });\n\n    this.#navElem?.addEventListener(\"mouseleave\", (e)=>{\n      if( !SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag) ||\n          !SettingsUtil.get(SETTINGS.showSceneNavOnHover.tag) ){ \n            return;\n      }\n      if (!e) var e = window.event;\n      e.cancelBubble = true;\n      if (e.stopPropagation) e.stopPropagation();\n\n      this.#navTimeout = setTimeout(()=>{\n        clearTimeout(this.#navTimeout);\n        this.#navTimeout = null;\n        const list = document.querySelector(\"#scene-list\");\n        list.style.display = \"none\";\n        const navigation = document.querySelector(\"#navigation\");\n        navigation.classList.add(\"collapsed\");\n      }, 700);\n    });\n\n  }\n\n  static placeNavButtons(){ \n    const existingButtons = this.#navElem?.querySelectorAll(\"button.crlngn-nav\");\n    const isNavOverflowing = this.#scenesList?.scrollWidth >= this.#navElem?.offsetWidth;\n    LogUtil.log(\"placeNavButtons\", [ isNavOverflowing, existingButtons, this.#scenesList?.scrollWidth, this.#navElem?.offsetWidth]);\n    if(!isNavOverflowing || existingButtons.length > 0){\n      return;\n    }\n\n    const btnLast = document.createElement(\"button\"); \n    btnLast.classList.add(\"crlngn-nav\"); \n    btnLast.classList.add(\"ui-nav-left\"); \n    const arrowLeft = document.createElement(\"i\"); \n    arrowLeft.classList.add(\"fa\"); \n    arrowLeft.classList.add(\"fa-chevron-left\"); \n    btnLast.addEventListener(\"click\", this.#onNavLast);\n    btnLast.append(arrowLeft); \n\n    const btnNext = document.createElement(\"button\"); \n    btnNext.classList.add(\"crlngn-nav\"); \n    btnNext.classList.add(\"ui-nav-right\"); \n    const arrowRight = document.createElement(\"i\"); \n    arrowRight.classList.add(\"fa\"); \n    arrowRight.classList.add(\"fa-chevron-right\"); \n    btnNext.append(arrowRight); \n    btnNext.addEventListener(\"click\", this.#onNavNext);\n\n    this.#navElem?.appendChild(btnLast);\n    this.#navElem?.appendChild(btnNext);\n  }\n\n\n  static #onNavLast = (e) => {\n    const toggleWidth = this.#navToggle?.offsetWidth;\n    const extrasWidth = GeneralUtil.isModuleOn(\"compact-scene-navigation\") ? this.#navExtras?.offsetWidth : 0;\n    const firstScene = this.#scenesList?.querySelector(\"li.nav-item:not(.is-root)\");\n    const scenes = this.#scenesList?.querySelectorAll(\"li.nav-item\") || [];\n    const itemWidth = firstScene.offsetWidth;\n    const currPos = SettingsUtil.get(SETTINGS.sceneNavPos.tag) || 0;\n    const itemsPerPage = Math.floor((this.#navElem?.offsetWidth - (currPos === 0 ? extrasWidth : 0) - (toggleWidth*2))/itemWidth);\n\n    LogUtil.log(\"onNavLast\", [\"currPos\", currPos, itemsPerPage]);\n\n    let newPos = currPos - itemsPerPage;\n    newPos = newPos < 0 ? 0 : newPos;\n\n    LogUtil.log(\"onNavLast\", [\"sceneCount\", scenes.length, currPos, newPos]);\n    TopNavigation.setNavPosition(newPos); \n    \n    // LogUtil.log(\"onNavLast\", [itemsPerPage, newPos]);\n  }\n\n  static #onNavNext = (e) => {\n    const toggleWidth = this.#navToggle?.offsetWidth;\n    const extrasWidth = GeneralUtil.isModuleOn(\"compact-scene-navigation\") ? this.#navExtras?.offsetWidth : 0;\n    const firstScene = this.#scenesList?.querySelector(\"li.nav-item:not(.is-root)\");\n    const scenes = this.#scenesList?.querySelectorAll(\"li.nav-item:not(.is-root)\") || [];\n    const itemWidth = firstScene.offsetWidth;\n    const currPos = SettingsUtil.get(SETTINGS.sceneNavPos.tag) || 0;\n    const itemsPerPage = Math.floor((this.#navElem?.offsetWidth - (currPos === 0 ? extrasWidth : 0) - (toggleWidth*2))/itemWidth);\n\n    LogUtil.log(\"onNavLast\", [\"currPos\", currPos, itemsPerPage]);\n\n    let newPos = currPos + itemsPerPage;\n    newPos = newPos > scenes.length ? scenes.length : newPos;\n\n    TopNavigation.setNavPosition(newPos); \n    \n\n    \n  }\n\n  static setNavPosition(pos){\n    const position = pos !== undefined ? pos : SettingsUtil.get(SETTINGS.sceneNavPos.tag);\n    const scenes = this.#scenesList?.querySelectorAll(\"li.nav-item\") || [];\n\n    const newMargin = scenes[position]?.offsetLeft * -1;\n    this.#scenesList.style.marginLeft = newMargin + 'px';\n\n    SettingsUtil.set(SETTINGS.sceneNavPos.tag, position);\n\n    LogUtil.log(\"setNavPosition\", [pos, position, scenes[position], newMargin]);\n  }\n}\n\n","import { SETTINGS } from \"../constants/Settings.mjs\";\nimport \"../styles/chat.css\"\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class ChatUtil {\n\n  static enrichCard(chatMessage, html){\n    if(SettingsUtil.get(SETTINGS.enableChatStyles.tag)){ \n      const rollType = chatMessage.flags?.dnd5e?.activity?.type || chatMessage.flags?.dnd5e?.roll?.type || \"custom\";\n      const elem = html.get(0);\n      elem.classList.add('crlngn');\n      elem.classList.add(rollType);\n    }    \n  }\n\n}","import { HOOKS_CORE } from \"../constants/Hooks.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { LogUtil } from \"./LogUtil.mjs\";\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class PlayersListUtil {\n\n  static init(){\n    Hooks.on(HOOKS_CORE.RENDER_PLAYERS_LIST, PlayersListUtil.onRender); \n  }\n\n  static onRender(){\n    const playersList = document.querySelector(`aside#players`);\n    const playersTitle = document.querySelector(`aside#players h3[aria-label=\"Players\"]`);\n\n    const playersHeight = playersList.offsetHeight;\n    const root = document.querySelector(\"body.crlngn-ui\");\n    root.style.setProperty('--players-list-height', playersHeight+'px');\n\n    playersTitle.addEventListener('click', ()=>{\n      if(playersList.classList.contains('expanded')){\n        playersList.classList.remove('expanded');\n      }else{\n        playersList.classList.add('expanded');\n      }\n    })\n\n  }\n\n}","import { HOOKS_CORE } from \"../constants/Hooks.mjs\"; \nimport { LogUtil } from \"./LogUtil.mjs\"; \nimport { SettingsUtil } from \"./SettingsUtil.mjs\"; \nimport { TopNavigation } from \"./TopNavUtil.mjs\"; \nimport { ChatUtil } from \"./ChatUtil.mjs\";\nimport { CameraUtil } from \"./CameraUtil.mjs\";\nimport { PlayersListUtil } from \"./PlayersListUtil.mjs\";\n\nexport class Main {\n\n  static init(){\n\n    Hooks.once(HOOKS_CORE.INIT, () => { \n      document.querySelector(\"#ui-middle\")?.classList.add(\"crlngn-ui\");\n      LogUtil.log(\"Initiating module\", [], true); \n      // Main.setupKeyListeners(); \n      SettingsUtil.registerSettings();\n      Hooks.on(HOOKS_CORE.RENDER_CHAT_MESSAGE, Main.#onRenderChatMessage); \n    });\n\n    Hooks.once(HOOKS_CORE.READY, () => {\n      var isDebugOn = SettingsUtil.get('debug-mode');\n      if(isDebugOn){CONFIG.debug.hooks = true};\n      LogUtil.log(\"Core Ready\", []);\n\n      TopNavigation.init(); \n      CameraUtil.init(); \n      PlayersListUtil.init(); \n    })\n    \n  }\n\n  static setupKeyListeners(){\n    // Listen to keydown event and store keys\n    window.addEventListener('keydown', (event) => {\n      const keyPressed = event.key;\n      const index = Main.keysPressed.indexOf(keyPressed);\n\n      if(index < 0){\n        Main.keysPressed.push(keyPressed);\n      }\n      LogUtil.log(\"Keydown\", [Main.keysPressed]);\n    });\n\n    // Listen to keyup event and remove keys\n    window.addEventListener('keyup', (event) => {\n      const keyReleased = event.key;\n      const index = Main.keysPressed.indexOf(keyReleased);\n\n      if(index >= 0){\n        Main.keysPressed.splice(index,1);\n      }\n      LogUtil.log(\"Keyup\", [Main.keysPressed]); \n    });\n  }\n\n  static #onRenderChatMessage = (chatMessage, html) => { \n    LogUtil.log(HOOKS_CORE.RENDER_CHAT_MESSAGE,[chatMessage, html]);\n  \n    ChatUtil.enrichCard(chatMessage, html);\n  }\n\n}\n","\nimport \"./styles/main.css\";\nimport \"./styles/ui-middle.css\";\nimport \"./styles/ui-top.css\";\nimport \"./styles/ui-right.css\";\nimport \"./styles/ui-bottom.css\";\nimport \"./styles/ui-left.css\";\nimport \"./styles/camera.css\";\nimport \"./styles/chat.css\";\nimport \"./styles/players-list.css\";\nimport \"./styles/other-modules.css\";\n\nimport { Main } from \"./components/Main.mjs\";\n\nMain.init();"],"names":["HOOKS_CORE","MODULE_ID","MODULE_SHORT","DEBUG_TAG","SETTING_INPUT","SETTING_SCOPE","SETTINGS","GeneralUtil","moduleName","_a","module","parent","selector","element","offsetTop","elementHeight","offsetParent","_offsetX","_offsetY","_startX","_startY","_startWidth","_startHeight","_startBottom","_CameraUtil_static","onDragRelease_fn","onDragMove_fn","onResize_fn","onStopResize_fn","_CameraUtil","SettingsUtil","LogUtil","_b","_c","controlsElem","cameraGrid","camControls","existingButtons","controlBar","btnToggle","e","body","__privateMethod","offsetBottom","__privateSet","resizeHandle","x","y","w","h","savedPosX","savedPosY","savedWidth","savedHeight","left","__privateGet","bottom","newWidth","deltaY","newHeight","newBottom","_d","_e","_f","__privateAdd","__publicField","CameraUtil","entry","setting","settingObj","value","customFont","settingName","selectedSetting","newValue","settingTag","macroSizeOption","hotbar","controlsAutoHide","controls","pos","xPos","yPos","width","height","ref","data","bypassSettings","debugSetting","strRef","options","_navElem","_scenesList","_navTimeout","_navExtras","_navToggle","_onNavLast","_onNavNext","_TopNavigation","uiMiddle","nav","list","_g","isNavOverflowing","btnLast","arrowLeft","btnNext","arrowRight","position","scenes","newMargin","toggleWidth","extrasWidth","firstScene","itemWidth","currPos","itemsPerPage","newPos","TopNavigation","ChatUtil","chatMessage","html","rollType","elem","PlayersListUtil","playersList","playersTitle","playersHeight","_onRenderChatMessage","_Main","isDebugOn","event","keyPressed","keyReleased","index","Main"],"mappings":"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"}