{"version":3,"file":"module.js","sources":["../../src/constants/Hooks.mjs","../../src/constants/General.mjs","../../src/constants/Settings.mjs","../../src/components/SettingsUtil.mjs","../../src/components/LogUtil.mjs","../../src/components/TopNavUtil.mjs","../../src/components/ChatUtil.mjs","../../src/components/Main.mjs","../../src/module.mjs"],"sourcesContent":["/**\n * Foundry Core hooks\n * https://foundryvtt.com/api/classes/client.Hooks.html\n * https://foundryvtt.com/api/modules/hookEvents.html\n * */ \nexport const HOOKS_CORE = {\n  CHAT_MESSAGE: \"chatMessage\", \n  INIT: \"init\", \n  READY: \"ready\", \n  PRE_CREATE_CHAT_MESSAGE: \"preCreateChatMessage\", \n  CREATE_CHAT_MESSAGE: \"createChatMessage\", \n  RENDER_CHAT_MESSAGE: \"renderChatMessage\" ,\n  CREATE_MEASURED_TEMPLATE: \"createMeasuredTemplate\",\n  REFRESH_MEASURED_TEMPLATE: \"refreshMeasuredTemplate\",\n  GET_SCENE_CONTROLS: \"getSceneControlButtons\",\n  RENDER_SCENE_NAV: \"renderSceneNavigation\",\n  RENDER_HOTBAR: \"renderHotbar\",\n  COLLAPSE_SCENE_NAV: \"collapseSceneNavigation\",\n  EXPAND_SCENE_NAV: \"expandSceneNavigation\"\n}","export const MODULE_ID = \"crlngn-ui\";\nexport const MODULE_TITLE = \"Carolingian UI\";\nexport const MODULE_SHORT = \"crlngn-ui\";\nexport const DEBUG_TAG = [\n  `%cCarolingian UI`,\n  `color:rgb(54, 0, 119); font-weight: bold;`,\n  `|`,\n];\n\nexport const ROLL_TYPES = {\n  abilityCheck: \"ability\",\n  abilitySave: \"save\",\n  attack: \"attack\",\n  check: \"check\",\n  concentration: \"concentration\",\n  damage: \"damage\",\n  deathSave: \"death\",\n  formula: \"formula\",\n  healing: \"heal\",\n  custom: \"roll\",\n  skillCheck: \"skill\",\n  toolCheck: \"tool\"\n}\n\nexport const CHAR_ABILITIES = [\n  { abbrev: \"str\", name: \"strength\" },\n  { abbrev: \"dex\", name: \"dexterity\" },\n  { abbrev: \"con\", name: \"constitution\" },\n  { abbrev: \"int\", name: \"intelligence\" },\n  { abbrev: \"wis\", name: \"wisdom\" },\n  { abbrev: \"cha\", name: \"charisma\" }\n]\n\nexport const CLASS_PREFIX = 'crlngn';","export const SETTING_INPUT = {\n  select: \"select\", \n  checkbox: \"checkbox\",\n  text: \"text\"\n}\nexport const SETTING_SCOPE = {\n  client: \"client\",\n  world: \"world\"\n}\n\nexport const SETTINGS = { \n\n  enableChatStyles: { \n    tag: \"enable-chat-styles\", \n    label: \"Enable styles for chat messages\", \n    hint: \"Adds style modifications to chat cards. When dark mode is selected on Foundry, makes chat cards dark as well. <b>Mostly for DnD5e</b> - only partial support for other systems.\", \n    propType: Boolean, \n    inputType: SETTING_INPUT.checkbox, \n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: true \n  }, \n\n  customFont: { \n    tag: \"custom-font\", \n    label: \"Custom fonts\", \n    hint: \"You can type the name of custom fonts loaded on Foundry core and they will be used throughout the interface. Names with spaces must be written with double quotes (\\\"Font Name\\\"). If the font doesn't load you haven't typed the name correctly, or the font was not found. Default value: \"+`\"Work Sans\", Arial, sans-serif`, \n    propType: String, \n    inputType: SETTING_INPUT.text, \n    default: `\"Work Sans\", Arial, sans-serif`, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: true \n  }, \n\n  debugMode: { \n    tag: \"debug-mode\", \n    label: \"Debug Mode\",\n    hint: \"Enable or disable debug messages on browser console\",\n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: false,\n    scope: SETTING_SCOPE.client,\n    config: true\n  },\n\n  sceneNavCollapsed: { \n    tag: \"scene-nav-collapsed\", \n    label: \"Scene Navigation Collapsed\", \n    hint: \"Current state of the scene navigation toggle. Is it collapsed?\", \n    propType: Boolean, \n    inputType: SETTING_INPUT.checkbox, \n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: false \n  },\n\n  sceneNavPos: { \n    tag: \"scene-nav-pos\", \n    label: \"Scene Navigation Position\", \n    hint: \"Stores current position of navigation for reset when it's re-rendered\", \n    propType: Number, \n    inputType: SETTING_INPUT.number, \n    default: 0, \n    scope: SETTING_SCOPE.client, \n    config: false \n  },\n\n  enableMacroLayout: { \n    tag: \"enable-macro-layout\", \n    label: \"Enable macro resize\", \n    hint: \"The module reduces the size of macro slots on the hotbar, and enlarges the numbers. Disable this setting to use default Foundry layout.\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n  showSceneNavOnHover: { \n    tag: \"show-scene-nav-on-hover\", \n    label: \"Show scene list on hover\", \n    hint: \"If the scene navigation is collapsed, you can show it by hovering the mouse over the top of screen.\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n  autoHideLeftControls: { \n    tag: \"auto-hide-secondary-controls\", \n    label: \"Auto hide secondary controls\", \n    hint: \"Enable to auto-hide the secondary bar on the left controls, unless the mouse is not over that area\", \n    propType: Boolean,\n    inputType: SETTING_INPUT.checkbox,\n    default: true, \n    scope: SETTING_SCOPE.client, \n    config: true, \n    requiresReload: false \n  },\n\n}","import { MODULE_ID, MODULE_SHORT } from \"../constants/General.mjs\";\nimport { HOOKS_CORE } from \"../constants/Hooks.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { LogUtil } from \"./LogUtil.mjs\";\n\nexport class SettingsUtil {\n    /**\n     * Registers settings for this module\n     */\n    static registerSettings(){\n      document.querySelector(\"body\").classList.add(MODULE_SHORT); \n      \n      /**\n       * Register each of the settings defined in the SETTINGS constant \n       */\n      const settingsList = Object.entries(SETTINGS);\n      settingsList.forEach(async(entry) => {\n        const setting = entry[1]; \n        LogUtil.log(\"Registering... \",[entry]);\n\n        const settingObj = { \n          name: setting.label,\n          hint: setting.hint,\n          default: setting.default,\n          type: setting.propType,\n          scope: setting.scope,\n          config: setting.config,\n          requiresReload: setting.requiresReload || false,\n          onChange: value => SettingsUtil.apply(setting.tag, value)\n        }\n\n        await game.settings.register(MODULE_ID, setting.tag, settingObj);\n\n        if(SettingsUtil.get(setting.tag)===undefined){\n          SettingsUtil.set(setting.tag, setting.default);\n        }\n\n        LogUtil.log(\"registerSettings\",[setting.tag, SettingsUtil.get(setting.tag)]);\n        SettingsUtil.applyLeftControlsSettings();\n      });\n\n      Hooks.on(HOOKS_CORE.RENDER_HOTBAR, SettingsUtil.applyHotBarSettings);\n      \n      // apply chat style settings\n      if(SettingsUtil.get(SETTINGS.enableChatStyles.tag)){ \n        document.querySelector(\"body\").classList.add(\"crlngn-chat\"); \n      }\n\n      // apply custom font settings\n      const customFont = SettingsUtil.get(SETTINGS.customFont.tag);\n      if(customFont){\n        const root = document.querySelector(\"body.crlngn-ui\");\n        root.style.setProperty('--crlngn-font-family', customFont);\n      }\n    }\n\n    /**\n     * Retrieve the value of a setting for this module\n     * @param {String} settingName \n     * @param {String} moduleName \n     * @returns {*} // current value of the setting\n     */\n    static get(settingName, moduleName=MODULE_ID){\n      if(!settingName){ return null; }\n\n      let setting = false;\n\n      if(moduleName===MODULE_ID){\n        setting = game.settings.get(moduleName, settingName);\n      }else{\n        const client = game.settings.storage.get(\"client\");\n        let selectedSetting = client[`${moduleName}.${settingName}`];\n        //\n        if(selectedSetting===undefined){\n          const world = game.settings.storage.get(\"world\");\n          selectedSetting = world.getSetting(`${moduleName}.${settingName}`);\n        }\n        setting = selectedSetting?.value;\n        LogUtil.log(\"GET Setting\", [selectedSetting, setting]);\n      }\n\n      return setting;\n    }\n    /**\n     * Retrieve the value of a setting for this module\n     * @param {String} settingName \n     * @param {String} moduleName \n     * @returns {*} // current value of the setting\n     */\n    static set(settingName, newValue, moduleName=MODULE_ID){ \n      if(!settingName){ return false; }\n\n      let selectedSetting = game.settings.storage.get(\"client\")[`${moduleName}.${settingName}`];\n\n      if(!selectedSetting){\n        const world = game.settings.storage.get(\"world\");\n        selectedSetting = world.getSetting(`${moduleName}.${settingName}`);\n      } \n      LogUtil.log(\"Setting\",[settingName, selectedSetting]);\n\n      try{\n        game.settings.set(moduleName, settingName, newValue);\n        // selectedSetting.update({value: newValue});\n      }catch(e){\n        LogUtil.log(\"Unable to change setting\",[settingName, selectedSetting]);\n      }\n\n      return true;\n    }\n\n    /**\n     * Apply current settings\n     */\n    static apply(settingTag, value=undefined){\n\n      if(value===undefined){\n        value = SettingsUtil.get(settingTag);\n      }\n      LogUtil.log(\"SettingsUtil.apply\",[settingTag, value, SettingsUtil.get(settingTag)]); \n      switch(settingTag){\n        case SETTINGS.enableMacroLayout.tag:\n          SettingsUtil.applyHotBarSettings(); break;\n        case SETTINGS.autoHideLeftControls.tag:\n          SettingsUtil.applyLeftControlsSettings(); break;\n        default:\n          // do nothing\n      }\n      \n    }\n\n\n    static applySettings(){\n      // const settingsList = Object.entries(SETTINGS);\n      // settingsList.forEach((entry) => {\n      //   const setting = entry[1]; \n      //   let currSetting = SettingsUtil.get(setting.tag);\n      //   SettingsUtil.apply(setting.tag, currSetting);\n      // });\n    }\n\n    static applyHotBarSettings(){\n      const macroSizeOption = SettingsUtil.get(SETTINGS.enableMacroLayout.tag);\n      const uiBottom = document.querySelector(\"#hotbar\");\n\n      if(!macroSizeOption){\n        uiBottom.classList.add(\"foundry-default\");\n      }else{\n        uiBottom.classList.remove(\"foundry-default\");\n      }\n    }\n\n    static applyLeftControlsSettings(){\n      const controlsAutoHide = SettingsUtil.get(SETTINGS.autoHideLeftControls.tag);\n      const controls = document.querySelector(\"#ui-left\");\n\n      if(controlsAutoHide){\n        controls.classList.add(\"auto-hide\");\n      }else{\n        controls.classList.remove(\"auto-hide\");\n      }\n    }\n}\n\n","import { DEBUG_TAG } from \"../constants/General.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class LogUtil {\n    /**\n     * Outputs information on console, adding module name and reference\n     * @param {string} ref - Reference information to log after module name\n     * @param {any[]} data - data to log on console\n     */\n    static log(ref=\"\", data=[], bypassSettings=false){\n      try{\n        const debugSetting = SettingsUtil.get(SETTINGS.debugMode.tag);\n        const isDebugModeOn = bypassSettings || debugSetting;\n        if(!isDebugModeOn){ return };\n\n        console.log(...DEBUG_TAG, ref, ...data);\n      }catch(e){\n        console.log(...DEBUG_TAG, ref, ...data);\n      }\n    }\n\n    /**\n     * Outputs information on console, adding module name and reference\n     * @param {string} ref - Reference information to log after module name\n     * @param {any[]} data - data to log on console\n     */\n    static warn(ref=\"\", data=[]){\n      console.warn(...DEBUG_TAG, ref, ...data);\n    }\n\n    /**\n     * Logs an error on the console and/or ui notification\n     * @param {string} strRef - Reference string for the error. \n     * @param {object} options - \n     */\n    static logError(strRef, options){ // = { ui:false, console:true, permanent:false }) {\n        if(options.ui){\n            // console.log(ui.notifications);\n            ui.notifications?.error(strRef, { localize: true, permanent: options.permanent });\n        }\n        if(options.console) console.error(...DEBUG_TAG, strRef);\n    }\n}\n\n","import { HOOKS_CORE } from \"../constants/Hooks.mjs\";\nimport { SETTINGS } from \"../constants/Settings.mjs\";\nimport { LogUtil } from \"./LogUtil.mjs\";\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class TopNavigation {\n  static #navElem;\n  static #scenesList;\n  static #navTimeout;\n\n  static init(){\n\n    Hooks.on(HOOKS_CORE.RENDER_SCENE_NAV, (a, b, c) => { \n      TopNavigation.addListeners()\n\n      LogUtil.log(HOOKS_CORE.RENDER_SCENE_NAV, [ui.nav, SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag)]); \n      TopNavigation.setNavPosition();\n      TopNavigation.placeNavButtons();\n      \n      if(SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag)){ \n        ui.nav.collapse();\n      }else{\n        ui.nav.expand();\n      }\n    }); \n\n    Hooks.on(HOOKS_CORE.COLLAPSE_SCENE_NAV, (nav, value) => {\n      SettingsUtil.set(SETTINGS.sceneNavCollapsed.tag, value); \n      LogUtil.log(\"NAV toggle\", [nav, value]); \n    }); \n\n    Hooks.on(HOOKS_CORE.EXPAND_SCENE_NAV, (nav, value) => {\n      SettingsUtil.set(SETTINGS.sceneNavCollapsed.tag, false); \n      LogUtil.log(\"NAV expand\", [nav, false]); \n    }); \n\n    SettingsUtil.apply(SETTINGS.sceneNavCollapsed.tag); \n    \n  } \n\n  static addListeners(){\n    this.#navElem = document.querySelector(\"#navigation\"); \n    this.#scenesList = document.querySelector(\"#scene-list\"); \n\n    this.#navElem.addEventListener(\"mouseenter\", ()=>{\n      if( !SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag) ||\n          !SettingsUtil.get(SETTINGS.showSceneNavOnHover.tag) ){ \n            return;\n      }\n      clearTimeout(this.#navTimeout);\n      /*ui.nav.expand();*/\n\n      const list = document.querySelector(\"#scene-list\");\n      list.style.display = \"flex\";\n      const navigation = document.querySelector(\"#navigation\");\n      navigation.classList.remove(\"collapsed\");\n    });\n\n    this.#navElem.addEventListener(\"mouseleave\", (e)=>{\n      if( !SettingsUtil.get(SETTINGS.sceneNavCollapsed.tag) ||\n          !SettingsUtil.get(SETTINGS.showSceneNavOnHover.tag) ){ \n            return;\n      }\n      if (!e) var e = window.event;\n      e.cancelBubble = true;\n      if (e.stopPropagation) e.stopPropagation();\n\n      this.#navTimeout = setTimeout(()=>{\n        clearTimeout(this.#navTimeout);\n        this.#navTimeout = null;\n        /*ui.nav.collapse();*/\n        const list = document.querySelector(\"#scene-list\");\n        list.style.display = \"none\";\n        const navigation = document.querySelector(\"#navigation\");\n        navigation.classList.add(\"collapsed\");\n      }, 700);\n    });\n\n  }\n\n  static placeNavButtons(){ \n\n    const btnLast = document.createElement(\"button\"); \n    btnLast.classList.add(\"crlngn\"); \n    btnLast.classList.add(\"ui-nav-left\"); \n    const arrowLeft = document.createElement(\"i\"); \n    arrowLeft.classList.add(\"fa\"); \n    arrowLeft.classList.add(\"fa-chevron-left\"); \n    btnLast.addEventListener(\"click\", this.#onNavLast);\n    btnLast.append(arrowLeft); \n\n    const btnNext = document.createElement(\"button\"); \n    btnNext.classList.add(\"crlngn\"); \n    btnNext.classList.add(\"ui-nav-right\"); \n    const arrowRight = document.createElement(\"i\"); \n    arrowRight.classList.add(\"fa\"); \n    arrowRight.classList.add(\"fa-chevron-right\"); \n    btnNext.append(arrowRight); \n    btnNext.addEventListener(\"click\", this.#onNavNext);\n\n    this.#navElem.appendChild(btnLast);\n    this.#navElem.appendChild(btnNext);\n  }\n\n  static #onNavLast = (e) => {\n    const firstElem = this.#scenesList?.querySelector(\"li:first-child\");\n    const itemWidth = firstElem.offsetWidth;\n    const itemsPerPage = Math.floor(this.#scenesList?.offsetWidth/itemWidth);\n    const currScrollPos = parseInt(firstElem.style.marginLeft || 0); \n    let newPos = 0;\n\n    if(currScrollPos < 0){\n      const newMargin = Number(currScrollPos + (itemWidth*itemsPerPage));\n      newPos = (newMargin < 0 ? newMargin : 0);\n    }\n    SettingsUtil.set(SETTINGS.sceneNavPos.tag, newPos);\n    TopNavigation.setNavPosition(newPos);\n    \n    LogUtil.log(\"onNavLast\", [itemsPerPage, itemWidth, currScrollPos, newPos]);\n  }\n\n  static #onNavNext = (e) => {\n    const firstElem = this.#scenesList?.querySelector(\"li:first-child\");\n    const itemWidth = firstElem.offsetWidth;\n    const itemsPerPage = Math.floor(this.#scenesList?.offsetWidth/itemWidth);\n    const currScrollPos = parseInt(firstElem.style.marginLeft || 0); \n    let newPos = currScrollPos;\n    LogUtil.log(\"onNavNext\", [firstElem.style.marginLeft, currScrollPos]);\n\n    if(this.#scenesList?.scrollWidth + currScrollPos > this.#scenesList?.offsetWidth ){\n      const newMargin = Number(currScrollPos - (itemWidth*itemsPerPage));\n      const minMargin = -(this.#scenesList?.offsetWidth - itemWidth);\n      newPos = (newMargin > minMargin ? newMargin : minMargin);\n    }\n    SettingsUtil.set(SETTINGS.sceneNavPos.tag, newPos);\n    TopNavigation.setNavPosition(newPos);\n    \n    LogUtil.log(\"onNavNext\", [itemsPerPage, itemWidth, currScrollPos, newPos, this.#scenesList?.offsetWidth]);\n  }\n\n  static setNavPosition(pos){\n    const position = pos || SettingsUtil.get(SETTINGS.sceneNavPos.tag);\n    const firstElem = this.#scenesList?.querySelector(\"li:first-child\");\n    firstElem.style.marginLeft = position + 'px';\n  }\n}\n\n","import { SETTINGS } from \"../constants/Settings.mjs\";\nimport \"../styles/chat.css\"\nimport { SettingsUtil } from \"./SettingsUtil.mjs\";\n\nexport class ChatUtil {\n\n  static enrichCard(chatMessage, html){\n    if(SettingsUtil.get(SETTINGS.enableChatStyles.tag)){ \n      const rollType = chatMessage.flags?.dnd5e?.activity?.type || chatMessage.flags?.dnd5e?.roll?.type || \"custom\";\n      const elem = html.get(0);\n      elem.classList.add('crlngn');\n      elem.classList.add(rollType);\n    }    \n  }\n\n}","import { HOOKS_CORE } from \"../constants/Hooks.mjs\"; \nimport { LogUtil } from \"./LogUtil.mjs\"; \nimport { SettingsUtil } from \"./SettingsUtil.mjs\"; \nimport { TopNavigation } from \"./TopNavUtil.mjs\"; \nimport { ChatUtil } from \"./ChatUtil.mjs\";\n\nexport class Main {\n\n  static init(){\n\n    Hooks.once(HOOKS_CORE.INIT, () => { \n\n      LogUtil.log(\"Initiating module\", [], true); \n      // Main.setupKeyListeners(); \n      SettingsUtil.registerSettings();\n      Hooks.on(HOOKS_CORE.RENDER_CHAT_MESSAGE, Main.#onRenderChatMessage); \n    });\n\n    Hooks.once(HOOKS_CORE.READY, () => {\n      TopNavigation.init(); \n\n      var isDebugOn = SettingsUtil.get('debug-mode');\n      if(isDebugOn){CONFIG.debug.hooks = true};\n      LogUtil.log(\"Core Ready\", []);\n    })\n\n    \n  }\n\n  static setupKeyListeners(){\n    // Listen to keydown event and store keys\n    window.addEventListener('keydown', (event) => {\n      const keyPressed = event.key;\n      const index = Main.keysPressed.indexOf(keyPressed);\n\n      if(index < 0){\n        Main.keysPressed.push(keyPressed);\n      }\n      LogUtil.log(\"Keydown\", [Main.keysPressed]);\n    });\n\n    // Listen to keyup event and remove keys\n    window.addEventListener('keyup', (event) => {\n      const keyReleased = event.key;\n      const index = Main.keysPressed.indexOf(keyReleased);\n\n      if(index >= 0){\n        Main.keysPressed.splice(index,1);\n      }\n      LogUtil.log(\"Keyup\", [Main.keysPressed]); \n    });\n  }\n\n  static #onRenderChatMessage = (chatMessage, html) => { \n    LogUtil.log(HOOKS_CORE.RENDER_CHAT_MESSAGE,[chatMessage, html]);\n  \n    ChatUtil.enrichCard(chatMessage, html);\n  }\n\n}\n","\nimport \"./styles/main.css\";\nimport \"./styles/ui-middle.css\";\nimport \"./styles/ui-top.css\";\nimport \"./styles/ui-right.css\";\nimport \"./styles/ui-bottom.css\";\nimport \"./styles/ui-left.css\";\nimport \"./styles/camera.css\";\nimport \"./styles/chat.css\";\nimport \"./styles/other-modules.css\";\n\nimport { Main } from \"./components/Main.mjs\";\n\nMain.init();"],"names":["HOOKS_CORE","MODULE_ID","MODULE_SHORT","DEBUG_TAG","SETTING_INPUT","SETTING_SCOPE","SETTINGS","SettingsUtil","entry","setting","LogUtil","settingObj","value","customFont","settingName","moduleName","selectedSetting","newValue","settingTag","macroSizeOption","uiBottom","controlsAutoHide","controls","ref","data","bypassSettings","debugSetting","strRef","options","_a","_navElem","_scenesList","_navTimeout","_onNavLast","_onNavNext","_TopNavigation","a","b","c","nav","__privateSet","__privateGet","list","btnLast","arrowLeft","btnNext","arrowRight","pos","position","firstElem","__privateAdd","e","_b","itemWidth","itemsPerPage","currScrollPos","newPos","newMargin","_c","_d","_e","_f","minMargin","TopNavigation","ChatUtil","chatMessage","html","rollType","elem","_onRenderChatMessage","_Main","isDebugOn","event","keyPressed","keyReleased","index","Main"],"mappings":"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"}